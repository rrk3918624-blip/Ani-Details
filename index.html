<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ani Details</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="google-site-verification" content="FrXTfevYsibdw7V0MQ7JFK_4U09GsBblRbD2YBlhGg0">
<meta name="google-site-verification" content="Xdz9uP61UF-1Rz90-ex_AEwnhKQFbi4YjYYRBgmAqiY" />
<style>
body{margin:0;font-family:Arial;background:#0b1220;color:#fff}
header{padding:15px;background:#0e1627;position:sticky;top:0;z-index:10}
header h1{margin:0;color:#4cc2ff}
.search-box input{width:100%;padding:10px;margin-top:10px;border-radius:8px;border:none}

.section{padding:15px}
.section h2{margin-bottom:10px}

.anime-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px}
.card{background:#121a2e;border-radius:10px;overflow:hidden;cursor:pointer}
.card img{width:100%;height:170px;object-fit:cover}
.card p{font-size:13px;padding:6px;margin:0}
.date{font-size:11px;color:#4cc2ff;padding:0 6px}
.rating{font-size:12px;color:#ffcc00;padding:0 6px 6px}

.modal{position:fixed;inset:0;background:rgba(0,0,0,.85);display:none;justify-content:center;align-items:center;overflow:auto}
.modal-content{background:#121a2e;padding:15px;border-radius:10px;width:90%;max-width:420px}
.close{float:right;color:#ff4c4c;cursor:pointer}

.comment-box textarea{width:100%;height:60px;margin-top:10px;border-radius:6px;border:none;padding:6px}
.comment-box button{margin-top:6px;padding:6px 10px;background:#4cc2ff;border:none;border-radius:6px}
.comment{font-size:12px;background:#0e1627;padding:6px;border-radius:6px;margin-top:6px}
</style>
</head>

<body>

<header>
<h1>Ani Details</h1>
<div class="search-box">
<input type="text" placeholder="Search anime..." oninput="fastSearch(this.value)">
</div>
</header>

<div class="section">
<h2>Trending Anime</h2>
<div class="anime-grid" id="trending"></div>
</div>

<div class="section">
<h2>Upcoming Anime</h2>
<div class="anime-grid" id="upcoming"></div>
</div>

<div class="section">
<h2>Top Anime</h2>
<div class="anime-grid" id="top"></div>
</div>

<div class="modal" id="modal">
<div class="modal-content">
<span class="close" onclick="closeModal()">✖</span>
<h3 id="mTitle"></h3>
<p id="mRelease"></p>
<p id="mInfo"></p>
<p id="mRating"></p>
<p id="mDesc"></p>

<div class="comment-box">
<h4>Comments</h4>
<textarea id="commentInput" placeholder="Write your comment..."></textarea>
<button onclick="addComment()">Post</button>
<div id="commentList"></div>
</div>
</div>
</div>

<script>
const API="https://graphql.anilist.co";
let currentAnimeId=null;
let searchTimer=null;
let controller=null;

function getTitle(a){return a.title.english||a.title.romaji}
function formatDate(d){
 if(!d||!d.year) return "Release Date: TBA";
 return `Release Date: ${d.day||"??"}-${d.month||"??"}-${d.year}`;
}
function getRating(a){
 return a.averageScore ? (a.averageScore/10).toFixed(1)+" ⭐" : "N/A";
}

/* FAST SEARCH */
function fastSearch(v){
 clearTimeout(searchTimer);
 if(v.length<2) return;
 searchTimer=setTimeout(()=>searchAnime(v),300);
}

function fetchAnime(query,vars,cb){
 fetch(API,{
  method:"POST",
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify({query,variables:vars})
 }).then(r=>r.json()).then(d=>cb(d.data.Page.media));
}

function render(list,id){
 const box=document.getElementById(id);
 box.innerHTML="";
 list.forEach(a=>{
  box.innerHTML+=`
  <div class="card" onclick='openModal(${JSON.stringify(a).replace(/'/g,"")})'>
   <img src="${a.coverImage.large}">
   <p>${getTitle(a)}</p>
   <div class="rating">${getRating(a)}</div>
   <div class="date">${formatDate(a.startDate)}</div>
  </div>`;
 });
}

function openModal(a){
 currentAnimeId=a.id;
 document.getElementById("modal").style.display="flex";
 document.getElementById("mTitle").innerText=getTitle(a);
 document.getElementById("mRelease").innerText=formatDate(a.startDate);
 document.getElementById("mInfo").innerText=
  "Episodes: "+(a.episodes||"N/A")+" | Status: "+a.status;
 document.getElementById("mRating").innerText="Rating: "+getRating(a);
 document.getElementById("mDesc").innerHTML=a.description||"No description";
 loadComments();
}

function closeModal(){
 document.getElementById("modal").style.display="none";
}

/* COMMENTS (LOCAL) */
function loadComments(){
 const list=document.getElementById("commentList");
 list.innerHTML="";
 const data=JSON.parse(localStorage.getItem("comments_"+currentAnimeId))||[];
 data.forEach(c=>list.innerHTML+=`<div class="comment">${c}</div>`);
}
function addComment(){
 const input=document.getElementById("commentInput");
 if(!input.value)return;
 const key="comments_"+currentAnimeId;
 const data=JSON.parse(localStorage.getItem(key))||[];
 data.push(input.value);
 localStorage.setItem(key,JSON.stringify(data));
 input.value="";
 loadComments();
}

/* SEARCH QUERY */
function searchAnime(v){
 if(controller) controller.abort();
 controller=new AbortController();

 fetch(API,{
  method:"POST",
  signal:controller.signal,
  headers:{'Content-Type':'application/json'},
  body:JSON.stringify({
   query:`query($s:String){
    Page(perPage:20){
     media(search:$s,type:ANIME){
      id title{english romaji}
      coverImage{large}
      startDate{year month day}
      episodes status description averageScore
     }
    }
   }`,
   variables:{s:v}
  })
 }).then(r=>r.json())
 .then(d=>render(d.data.Page.media,"trending"))
 .catch(()=>{});
}

/* LOAD DEFAULT DATA */
fetchAnime(`query{
 Page(perPage:12){
  media(type:ANIME,sort:TRENDING_DESC){
   id title{english romaji}
   coverImage{large}
   startDate{year month day}
   episodes status description averageScore
  }
 }
}`,{},d=>render(d,"trending"));

fetchAnime(`query{
 Page(perPage:12){
  media(type:ANIME,status:NOT_YET_RELEASED,sort:START_DATE){
   id title{english romaji}
   coverImage{large}
   startDate{year month day}
   episodes status description averageScore
  }
 }
}`,{},d=>render(d,"upcoming"));

fetchAnime(`query{
 Page(perPage:12){
  media(type:ANIME,sort:SCORE_DESC){
   id title{english romaji}
   coverImage{large}
   startDate{year month day}
   episodes status description averageScore
  }
 }
}`,{},d=>render(d,"top"));
</script>
 <script src="https://pl28501296.effectivegatecpm.com/8c/a6/3d/8ca63da1d9be84fcb33715e892f8d29f.js"></script>
<script async="async" data-cfasync="false" src="https://pl28501289.effectivegatecpm.com/8113e3271667178152c587c49e609192/invoke.js"></script>
<div id="container-8113e3271667178152c587c49e609192"></div>
</body>

</html>



